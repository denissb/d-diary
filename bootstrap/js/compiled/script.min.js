!function(b){b(function(){var d=b.support,c;a:{c=document.createElement("bootstrap");var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},f;for(f in e)if(void 0!==c.style[f]){c=e[f];break a}c=void 0}d.transition=c&&{end:c}})}(window.jQuery);
!function(b){var d=function(c){b(c).on("click",'[data-dismiss="alert"]',this.close)};d.prototype.close=function(c){function e(){g.trigger("closed").remove()}var f=b(this),d=f.attr("data-target"),g;d||(d=(d=f.attr("href"))&&d.replace(/.*(?=#[^\s]*$)/,""));g=b(d);c&&c.preventDefault();g.length||(g=f.hasClass("alert")?f:f.parent());g.trigger(c=b.Event("close"));c.isDefaultPrevented()||(g.removeClass("in"),b.support.transition&&g.hasClass("fade")?g.on(b.support.transition.end,e):e())};b.fn.alert=function(c){return this.each(function(){var e=
b(this),f=e.data("alert");f||e.data("alert",f=new d(this));"string"==typeof c&&f[c].call(e)})};b.fn.alert.Constructor=d;b(function(){b("body").on("click.alert.data-api",'[data-dismiss="alert"]',d.prototype.close)})}(window.jQuery);
!function(b){var d=function(c,e){this.$element=b(c);this.options=b.extend({},b.fn.button.defaults,e)};d.prototype.setState=function(b){var e=this.$element,f=e.data(),d=e.is("input")?"val":"html";b+="Text";f.resetText||e.data("resetText",e[d]());e[d](f[b]||this.options[b]);setTimeout(function(){"loadingText"==b?e.addClass("disabled").attr("disabled","disabled"):e.removeClass("disabled").removeAttr("disabled")},0)};d.prototype.toggle=function(){var b=this.$element.parent('[data-toggle="buttons-radio"]');
b&&b.find(".active").removeClass("active");this.$element.toggleClass("active")};b.fn.button=function(c){return this.each(function(){var e=b(this),f=e.data("button"),h="object"==typeof c&&c;f||e.data("button",f=new d(this,h));"toggle"==c?f.toggle():c&&f.setState(c)})};b.fn.button.defaults={loadingText:"loading..."};b.fn.button.Constructor=d;b(function(){b("body").on("click.button.data-api","[data-toggle^=button]",function(c){c=b(c.target);c.hasClass("btn")||(c=c.closest(".btn"));c.button("toggle")})})}(window.jQuery);
!function(b){function d(){b(c).parent().removeClass("open")}var c='[data-toggle="dropdown"]',e=function(c){var e=b(c).on("click.dropdown.data-api",this.toggle);b("html").on("click.dropdown.data-api",function(){e.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(c){c=b(this);var e;if(!c.is(".disabled, :disabled"))return e=c.attr("data-target"),e||(e=(e=c.attr("href"))&&e.replace(/.*(?=#[^\s]*$)/,"")),e=b(e),e.length||(e=c.parent()),c=e.hasClass("open"),d(),c||e.toggleClass("open"),
!1}};b.fn.dropdown=function(c){return this.each(function(){var d=b(this),g=d.data("dropdown");g||d.data("dropdown",g=new e(this));"string"==typeof c&&g[c].call(d)})};b.fn.dropdown.Constructor=e;b(function(){b("html").on("click.dropdown.data-api",d);b("body").on("click.dropdown",".dropdown form",function(b){b.stopPropagation()}).on("click.dropdown.data-api",c,e.prototype.toggle)})}(window.jQuery);
!function(b){function d(){var e=this,d=setTimeout(function(){e.$element.off(b.support.transition.end);c.call(e)},500);this.$element.one(b.support.transition.end,function(){clearTimeout(d);c.call(e)})}function c(b){this.$element.hide().trigger("hidden");e.call(this)}function e(c){var e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=b.support.transition&&e;this.$backdrop=b('<div class="modal-backdrop '+e+'" />').appendTo(document.body);"static"!=this.options.backdrop&&
this.$backdrop.click(b.proxy(this.hide,this));d&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");d?this.$backdrop.one(b.support.transition.end,c):c()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),b.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(b.support.transition.end,b.proxy(f,this)):f.call(this)):c&&c()}function f(){this.$backdrop.remove();this.$backdrop=null}function h(){var c=this;if(this.isShown&&this.options.keyboard)b(document).on("keyup.dismiss.modal",
function(b){27==b.which&&c.hide()});else this.isShown||b(document).off("keyup.dismiss.modal")}var g=function(c,e){this.options=e;this.$element=b(c).delegate('[data-dismiss="modal"]',"click.dismiss.modal",b.proxy(this.hide,this))};g.prototype={constructor:g,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var c=this,d=b.Event("show");this.$element.trigger(d);this.isShown||d.isDefaultPrevented()||(b("body").addClass("modal-open"),this.isShown=!0,h.call(this),e.call(this,
function(){var e=b.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body);c.$element.show();e&&c.$element[0].offsetWidth;c.$element.addClass("in");e?c.$element.one(b.support.transition.end,function(){c.$element.trigger("shown")}):c.$element.trigger("shown")}))},hide:function(e){e&&e.preventDefault();e=b.Event("hide");this.$element.trigger(e);this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,b("body").removeClass("modal-open"),h.call(this),
this.$element.removeClass("in"),b.support.transition&&this.$element.hasClass("fade")?d.call(this):c.call(this))}};b.fn.modal=function(c){return this.each(function(){var e=b(this),d=e.data("modal"),f=b.extend({},b.fn.modal.defaults,e.data(),"object"==typeof c&&c);d||e.data("modal",d=new g(this,f));if("string"==typeof c)d[c]();else f.show&&d.show()})};b.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};b.fn.modal.Constructor=g;b(function(){b("body").on("click.modal.data-api",'[data-toggle="modal"]',
function(c){var e=b(this),d,f=b(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),e=f.data("modal")?"toggle":b.extend({},f.data(),e.data());c.preventDefault();f.modal(e)})})}(window.jQuery);
!function(b){var d=function(b,e){this.init("tooltip",b,e)};d.prototype={constructor:d,init:function(c,e,d){this.type=c;this.$element=b(e);this.options=this.getOptions(d);this.enabled=!0;"manual"!=this.options.trigger&&(c="hover"==this.options.trigger?"mouseenter":"focus",e="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(c,this.options.selector,b.proxy(this.enter,this)),this.$element.on(e,this.options.selector,b.proxy(this.leave,this)));this.options.selector?this._options=b.extend({},
this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(c){c=b.extend({},b.fn[this.type].defaults,c,this.$element.data());c.delay&&"number"==typeof c.delay&&(c.delay={show:c.delay,hide:c.delay});return c},enter:function(c){var e=b(c.currentTarget)[this.type](this._options).data(this.type);if(!e.options.delay||!e.options.delay.show)return e.show();clearTimeout(this.timeout);e.hoverState="in";this.timeout=setTimeout(function(){"in"==e.hoverState&&e.show()},e.options.delay.show)},
leave:function(c){var e=b(c.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!e.options.delay||!e.options.delay.hide)return e.hide();e.hoverState="out";this.timeout=setTimeout(function(){"out"==e.hoverState&&e.hide()},e.options.delay.hide)},show:function(){var b,e,d,h,g,k,l;if(this.hasContent()&&this.enabled){b=this.tip();this.setContent();this.options.animation&&b.addClass("fade");k="function"==typeof this.options.placement?this.options.placement.call(this,
b[0],this.$element[0]):this.options.placement;e=/in/.test(k);b.remove().css({top:0,left:0,display:"block"}).appendTo(e?this.$element:document.body);d=this.getPosition(e);h=b[0].offsetWidth;g=b[0].offsetHeight;switch(e?k.split(" ")[1]:k){case "bottom":l={top:d.top+d.height,left:d.left+d.width/2-h/2};break;case "top":l={top:d.top-g,left:d.left+d.width/2-h/2};break;case "left":l={top:d.top+d.height/2-g/2,left:d.left-h};break;case "right":l={top:d.top+d.height/2-g/2,left:d.left+d.width}}b.css(l).addClass(k).addClass("in")}},
isHTML:function(b){return"string"!=typeof b||"<"===b.charAt(0)&&">"===b.charAt(b.length-1)&&3<=b.length||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(b)},setContent:function(){var b=this.tip(),e=this.getTitle();b.find(".tooltip-inner")[this.isHTML(e)?"html":"text"](e);b.removeClass("fade in top bottom left right")},hide:function(){function c(){var c=setTimeout(function(){e.off(b.support.transition.end).remove()},500);e.one(b.support.transition.end,function(){clearTimeout(c);e.remove()})}var e=this.tip();e.removeClass("in");
b.support.transition&&this.$tip.hasClass("fade")?c():e.remove()},fixTitle:function(){var b=this.$element;(b.attr("title")||"string"!=typeof b.attr("data-original-title"))&&b.attr("data-original-title",b.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(c){return b.extend({},c?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var b=this.$element,e=this.options;
return b.attr("data-original-title")||("function"==typeof e.title?e.title.call(b[0]):e.title)},tip:function(){return this.$tip=this.$tip||b(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};b.fn.tooltip=function(c){return this.each(function(){var e=
b(this),f=e.data("tooltip"),h="object"==typeof c&&c;f||e.data("tooltip",f=new d(this,h));if("string"==typeof c)f[c]()})};b.fn.tooltip.Constructor=d;b.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0}}(window.jQuery);
!function(b){var d=function(b,e){this.init("popover",b,e)};d.prototype=b.extend({},b.fn.tooltip.Constructor.prototype,{constructor:d,setContent:function(){var b=this.tip(),e=this.getContent();b.find(".popover-container")[this.isHTML(e)?"html":"text"](e);b.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var b=this.$element,e=this.options;return b.attr("data-content")||("function"==typeof e.content?e.content.call(b[0]):
e.content)},tip:function(){this.$tip||(this.$tip=b(this.options.template));return this.$tip}});b.fn.popover=function(c){return this.each(function(){var e=b(this),f=e.data("popover"),h="object"==typeof c&&c;f||e.data("popover",f=new d(this,h));if("string"==typeof c)f[c]()})};b.fn.popover.Constructor=d;b.fn.popover.defaults=b.extend({},b.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="popover-container"></div></div>'})}(window.jQuery);
!function(b){var d=function(c){this.element=b(c)};d.prototype={constructor:d,show:function(){var c=this.element,e=c.closest("ul:not(.dropdown-menu)"),d=c.attr("data-target"),h,g;d||(d=(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]*$)/,""));c.parent("li").hasClass("active")||(h=e.find(".active a").last()[0],g=b.Event("show",{relatedTarget:h}),c.trigger(g),g.isDefaultPrevented()||(d=b(d),this.activate(c.parent("li"),e),this.activate(d,d.parent(),function(){c.trigger({type:"shown",relatedTarget:h})})))},
activate:function(c,e,d){function h(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");c.addClass("active");k?(c[0].offsetWidth,c.addClass("in")):c.removeClass("fade");c.parent(".dropdown-menu")&&c.closest("li.dropdown").addClass("active");d&&d()}var g=e.find("> .active"),k=d&&b.support.transition&&g.hasClass("fade");k?g.one(b.support.transition.end,h):h();g.removeClass("in")}};b.fn.tab=function(c){return this.each(function(){var e=b(this),f=e.data("tab");f||e.data("tab",
f=new d(this));if("string"==typeof c)f[c]()})};b.fn.tab.Constructor=d;b(function(){b("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault();b(this).tab("show")})})}(window.jQuery);
!function(b){var d=function(c,e){this.$element=b(c);this.options=b.extend({},b.fn.typeahead.defaults,e);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.$menu=b(this.options.menu).appendTo("body");this.source=this.options.source;this.shown=!1;this.listen()};d.prototype={constructor:d,select:function(){var b=this.$menu.find(".active").attr("data-value");
this.$element.val(this.updater(b)).change();return this.hide()},updater:function(b){return b},show:function(){var c=b.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.$menu.css({top:c.top+c.height,left:c.left});this.$menu.show();this.shown=!0;return this},hide:function(){this.$menu.hide();this.shown=!1;return this},lookup:function(c){var e=this;this.query=this.$element.val();if(!this.query)return this.shown?this.hide():this;c=b.grep(this.source,function(b){return e.matcher(b)});
c=this.sorter(c);return c.length?this.render(c.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(b){return~b.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(b){for(var e=[],d=[],h=[],g;g=b.shift();)g.toLowerCase().indexOf(this.query.toLowerCase())?~g.indexOf(this.query)?d.push(g):h.push(g):e.push(g);return e.concat(d,h)},highlighter:function(b){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return b.replace(RegExp("("+e+")","ig"),function(b,
c){return"<strong>"+c+"</strong>"})},render:function(c){var e=this;c=b(c).map(function(c,d){c=b(e.options.item).attr("data-value",d);c.find("a").html(e.highlighter(d));return c[0]});c.first().addClass("active");this.$menu.html(c);return this},next:function(c){c=this.$menu.find(".active").removeClass("active").next();c.length||(c=b(this.$menu.find("li")[0]));c.addClass("active")},prev:function(b){b=this.$menu.find(".active").removeClass("active").prev();b.length||(b=this.$menu.find("li").last());b.addClass("active")},
listen:function(){this.$element.on("blur",b.proxy(this.blur,this)).on("keypress",b.proxy(this.keypress,this)).on("keyup",b.proxy(this.keyup,this));if(b.browser.webkit||b.browser.msie)this.$element.on("keydown",b.proxy(this.keypress,this));this.$menu.on("click",b.proxy(this.click,this)).on("mouseenter","li",b.proxy(this.mouseenter,this))},keyup:function(b){switch(b.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;
default:this.lookup()}b.stopPropagation();b.preventDefault()},keypress:function(b){if(this.shown){switch(b.keyCode){case 9:case 13:case 27:b.preventDefault();break;case 38:if("keydown"!=b.type)break;b.preventDefault();this.prev();break;case 40:if("keydown"!=b.type)break;b.preventDefault();this.next()}b.stopPropagation()}},blur:function(b){var e=this;setTimeout(function(){e.hide()},150)},click:function(b){b.stopPropagation();b.preventDefault();this.select()},mouseenter:function(c){this.$menu.find(".active").removeClass("active");
b(c.currentTarget).addClass("active")}};b.fn.typeahead=function(c){return this.each(function(){var e=b(this),f=e.data("typeahead"),h="object"==typeof c&&c;f||e.data("typeahead",f=new d(this,h));if("string"==typeof c)f[c]()})};b.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'};b.fn.typeahead.Constructor=d;b(function(){b("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(c){var e=b(this);e.data("typeahead")||
(c.preventDefault(),e.typeahead(e.data()))})})}(window.jQuery);
!function(b){var d=function(c,e){this.$element=b(c);this.options=b.extend({},b.fn.collapse.defaults,e);this.options.parent&&(this.$parent=b(this.options.parent));this.options.toggle&&this.toggle()};d.prototype={constructor:d,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var c,e,d,h;if(!this.transitioning){c=this.dimension();e=b.camelCase(["scroll",c].join("-"));if((d=this.$parent&&this.$parent.find("> .accordion-group > .in"))&&d.length){if((h=d.data("collapse"))&&
h.transitioning)return;d.collapse("hide");h||d.data("collapse",null)}this.$element[c](0);this.transition("addClass",b.Event("show"),"shown");b.support.transition&&this.$element[c](this.$element[0][e])}},hide:function(){var c;this.transitioning||(c=this.dimension(),this.reset(this.$element[c]()),this.transition("removeClass",b.Event("hide"),"hidden"),this.$element[c](0))},reset:function(b){var e=this.dimension();this.$element.removeClass("collapse")[e](b||"auto")[0].offsetWidth;this.$element[null!==
b?"addClass":"removeClass"]("collapse");return this},transition:function(c,e,d){var h=this,g=function(){"show"==e.type&&h.reset();h.transitioning=0;h.$element.trigger(d)};this.$element.trigger(e);e.isDefaultPrevented()||(this.transitioning=1,this.$element[c]("in"),b.support.transition&&this.$element.hasClass("collapse")?this.$element.one(b.support.transition.end,g):g())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};b.fn.collapse=function(c){return this.each(function(){var e=
b(this),f=e.data("collapse"),h="object"==typeof c&&c;f||e.data("collapse",f=new d(this,h));if("string"==typeof c)f[c]()})};b.fn.collapse.defaults={toggle:!0};b.fn.collapse.Constructor=d;b(function(){b("body").on("click.collapse.data-api","[data-toggle=collapse]",function(c){var e=b(this),d;c=e.attr("data-target")||c.preventDefault()||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"");d=b(c).data("collapse")?"toggle":e.data();e[b(c).hasClass("in")?"addClass":"removeClass"]("collapsed");b(c).collapse(d)})})}(window.jQuery);
!function(b){var d=function(c){this.element=b(c)};d.prototype={constructor:d,show:function(){var c=this.element,e=c.closest("ul:not(.dropdown-menu)"),d=c.attr("data-target"),h,g;d||(d=(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]*$)/,""));c.parent("li").hasClass("active")||(h=e.find(".active:last a")[0],g=b.Event("show",{relatedTarget:h}),c.trigger(g),g.isDefaultPrevented()||(d=b(d),this.activate(c.parent("li"),e),this.activate(d,d.parent(),function(){c.trigger({type:"shown",relatedTarget:h})})))},activate:function(c,
d,f){function h(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");c.addClass("active");k?(c[0].offsetWidth,c.addClass("in")):c.removeClass("fade");c.parent(".dropdown-menu")&&c.closest("li.dropdown").addClass("active");f&&f()}var g=d.find("> .active"),k=f&&b.support.transition&&g.hasClass("fade");k?g.one(b.support.transition.end,h):h();g.removeClass("in")}};b.fn.tab=function(c){return this.each(function(){var e=b(this),f=e.data("tab");f||e.data("tab",f=new d(this));
if("string"==typeof c)f[c]()})};b.fn.tab.Constructor=d;b(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault();b(this).tab("show")})}(window.jQuery);$(document).ready(function(){window.err_msg=ui_lang.check_all_fields;$("#email-input").keydown(function(){is_valid_email($(this).val())?($(this).removeClass("error"),$(this).addClass("success")):(window.err_msg=ui_lang.invalid_email,$(this).removeClass("success"),$(this).addClass("error"))});$("#pass-input").keydown(function(){check_strength($(this))});$("#login-input").keydown(function(){3<$(this).val().length?($(this).removeClass("error"),$(this).addClass("success")):(window.err_msg=ui_lang.short_username,
$(this).removeClass("success"),$(this).addClass("error"))});confirm_val($("#email-confirm"));confirm_val($("#pass-confirm"));$("#signup").click(function(){5==$(".success").size()?$.ajax({type:"POST",url:"//ddiary.loc/signup/validate",data:{username:$("#login-input").val(),password:$("#pass-input").val(),email:$("#email-input").val(),terms:$("#agree-terms:checked").val(),capatcha:$("#capatcha-confirm").val()},success:function(b){"valid"==b?$("#registration").submit():$(".register").response(b,!1)},
fail:function(){$(".register").response(ui_lang.server_error,!1)}}):$(".register").response(window.err_msg,!1)});$("#refresh_capatcha").click(function(){$.ajax({type:"GET",url:"//ddiary.loc/signup/capatcha",success:function(b){$(".terms_td").children("img").replaceWith(b)},fail:function(){$(".register").response(ui_lang.server_error,!1)}})});$("#old-pass").keydown(function(){check_strength($(this))});$("#change_password").click(function(b){b.preventDefault();if(3>$(".success").size())$(".pass-change").response(window.err_msg,
!1);else{b=$("#old-pass").val();var d=$("#pass-input").val();b===d?($(".pass-change").response(ui_lang.pass_is_same,!1),$("#pass-input").removeClass("success"),$("#pass-input").addClass("error"),$(".icon-thumbs-up").remove()):$.ajax({type:"POST",url:"//ddiary.loc/settings/change_pass",dataType:"json",data:{old_pass:b,new_pass:d,new_pass_repeat:$("#pass-confirm").val()},success:function(b){$(".pass-change").response(b.msg,b.success);b.success&&($('input[type="password"]').val(""),$('input[type="password"]').removeClass("success"),
$(".icon-thumbs-up").remove())}})}})});function confirm_val(b){$(b).change(function(){var d="#"+$(this).attr("id").replace("confirm","input");b.val()==$(d).val()&&""!=$(this).val()?($(this).removeClass("error"),$(this).addClass("success")):($(this).removeClass("success"),$(this).addClass("error"),window.err_msg=ui_lang.invalid_confrimation)})}
function is_valid_email(b){return RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(b)}
function check_strength(b){var d=0,c=b.val();6<c.length?d+=1:window.err_msg=ui_lang.short_pass;c.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(d+=1);c.match(/([a-zA-Z])/)&&c.match(/([0-9])/)&&(d+=1);c.match(/([!,%,&,@,#,$,^,*,?,_,~])/)&&(d+=1);c.match(/(.*[!,%,&,@,#,$,^,*,?,_,~].*[!,",%,&,@,#,$,^,*,?,_,~])/)&&(d+=1);2>d?(b.removeClass("success"),window.err_msg=ui_lang.invalid_pass_combo,b.addClass("error"),$("#pass_result").remove()):2==d?(b.removeClass("error"),b.addClass("success"),$("#pass_result").remove()):
(b.removeClass("error"),b.addClass("success"),b.parent().append('<i class="icon-thumbs-up" id="pass_result"></i>'))}(function(b){jQuery.fn.response=function(b,c){var e="alert-error";!0==c&&(e="alert-success");this.before('<div class="alert '+e+'">'+b+'<a class="close" data-dismiss="alert" href="#">&times;</a></div>');setTimeout("$('.alert').alert('close');",7E3)}})(jQuery);(function(b,d,c){function e(b){return b}function f(b){return decodeURIComponent(b.replace(h," "))}var h=/\+/g,g=b.cookie=function(h,l,p){if(l!==c){p=b.extend({},g.defaults,p);null===l&&(p.expires=-1);if("number"===typeof p.expires){var t=p.expires,x=p.expires=new Date;x.setDate(x.getDate()+t)}l=g.json?JSON.stringify(l):String(l);return d.cookie=[encodeURIComponent(h),"=",g.raw?l:encodeURIComponent(l),p.expires?"; expires="+p.expires.toUTCString():"",p.path?"; path="+p.path:"",p.domain?"; domain="+
p.domain:"",p.secure?"; secure":""].join("")}l=g.raw?e:f;p=d.cookie.split("; ");t=0;for(x=p.length;t<x;t++){var y=p[t].split("=");if(l(y.shift())===h)return h=l(y.join("=")),g.json?JSON.parse(h):h}return null};g.defaults={};b.removeCookie=function(c,d){return null!==b.cookie(c)?(b.cookie(c,null,d),!0):!1}})(jQuery,document);(function(b){var d=window.localStorage,c;c="undefined"==typeof d||"undefined"==typeof window.JSON?!1:!0;b.totalStorage=function(c,d){return b.totalStorage.impl.init(c,d)};b.totalStorage.setItem=function(c,d){return b.totalStorage.impl.setItem(c,d)};b.totalStorage.getItem=function(c){return b.totalStorage.impl.getItem(c)};b.totalStorage.getAll=function(){return b.totalStorage.impl.getAll()};b.totalStorage.deleteItem=function(c){return b.totalStorage.impl.deleteItem(c)};b.totalStorage.impl={init:function(b,
c){return"undefined"!=typeof c?this.setItem(b,c):this.getItem(b)},setItem:function(e,f){if(!c)try{return b.cookie(e,f),f}catch(h){console.log("Local Storage not supported by this browser. Install the cookie plugin on your site to take advantage of the same functionality. You can get it at https://github.com/carhartl/jquery-cookie")}var g=JSON.stringify(f);d.setItem(e,g);return this.parseResult(g)},getItem:function(e){if(!c)try{return this.parseResult(b.cookie(e))}catch(f){return null}return this.parseResult(d.getItem(e))},
deleteItem:function(e){if(!c)try{return b.cookie(e,null),!0}catch(f){return!1}d.removeItem(e);return!0},getAll:function(){var e=[];if(c)for(h in d)h.length&&e.push({key:h,value:this.parseResult(d.getItem(h))});else try{for(var f=document.cookie.split(";"),h=0;h<f.length;h++){var g=f[h].split("=")[0];e.push({key:g,value:this.parseResult(b.cookie(g))})}}catch(k){return null}return e},parseResult:function(b){var c;try{c=JSON.parse(b),"true"==c&&(c=!0),"false"==c&&(c=!1),parseFloat(c)==c&&"object"!=typeof c&&
(c=parseFloat(c))}catch(d){}return c}}})(jQuery);(function(){var b;b=this.jQuery;this.Wysiwyg=function(){function d(c){var d,f;this.options=null!=c?c:{};this.el=b("<div />");f=this.options;for(d in f)c=f[d],this[d]=c;this.el.addClass(this.className);this.delegateEvents(this.events);this.render()}d.name="Wysiwyg";d.prototype.className="wysiwyg";d.prototype.events={"click [data-type=bold]":"bold","click [data-type=italic]":"italic","click [data-type=list]":"list","click [data-type=link]":"link","click [data-type=h2]":"h2","click [data-type=h3]":"h3",
"click [data-type=strikeThrough]":"strikeThrough","click a":"cancel"};d.prototype.document=document;d.prototype.render=function(){this.el.empty();this.el.append('<a href="#" data-type="bold" title="bold" class="btn btn-mini"><i class="icon-bold"></i></a>');this.el.append('<a href="#" data-type="list" title="list" class="btn btn-mini"><i class="icon-list-alt"></i></a>');this.el.append('<a href="#" data-type="link" title="link" class="btn btn-mini"><i class="icon-retweet"></a>');this.el.append('<a href="#" data-type="strikeThrough" title="strike through" class="btn btn-mini"><i class="icon-ok"></a>');
return this};d.prototype.strikeThrough=function(b){b.preventDefault();if(this.selectTest())return this.exec("strikeThrough")};d.prototype.bold=function(b){b.preventDefault();if(this.selectTest())return this.exec("bold")};d.prototype.italic=function(b){b.preventDefault();if(this.selectTest())return this.exec("italic")};d.prototype.list=function(b){b.preventDefault();return this.exec("insertOrderedList")};d.prototype.link=function(b){b.preventDefault();if(this.selectTest()&&(this.exec("unlink"),(b=
prompt("Enter a link:","http://"))&&"http://"!==b))return/:\/\//.test(b)||(b="http://"+b),this.exec("createLink",b)};d.prototype.h2=function(b){b.preventDefault();return"h2"===this.query("formatBlock")?this.exec("formatBlock","p"):this.exec("formatBlock","h2")};d.prototype.h3=function(b){b.preventDefault();return"h3"===this.query("formatBlock")?this.exec("formatBlock","p"):this.exec("formatBlock","h3")};d.prototype.move=function(b){return this.el.css(b)};d.prototype.cancel=function(b){b.preventDefault();
return b.stopImmediatePropagation()};d.prototype.getSelectedText=function(){var b;if(null!=(b=this.document)&&b.selection)return document.selection.createRange().text;if(this.document)return document.getSelection().toString()};d.prototype.selectTest=function(){return 0===this.getSelectedText().length?(alert("Select some text first."),!1):!0};d.prototype.exec=function(b,d){null==d&&(d=null);return this.document.execCommand(b,!1,d)};d.prototype.query=function(b){return this.document.queryCommandValue(b)};
d.prototype.delegateEvents=function(b){var d,f,h,g,k,l=this;k=[];for(f in b)g=b[f],"function"!==typeof g&&(g=function(b){return function(){l[b].apply(l,arguments);return!0}}(g)),h=f.match(/^(\S+)\s*(.*)$/),d=h[1],h=h[2],""===h?k.push(this.el.bind(d,g)):k.push(this.el.delegate(h,d,g));return k};return d}()}).call(this);(function(b){function d(b,d){for(var e=0,f=b.length;e<f;e++)if(b[e]==d)return!c;return c}var c=!1,e=parseFloat,f=String.fromCharCode,h=Math.min,g=/(-?\d+\.?\d*)$/g,k,l=[],p,t,x=9472,y={},I;Array.indexOf||(Array.prototype.indexOf=function(b){for(var c=0,d=this.length;c<d;c++)if(this[c]==b)return c;return-1});for(var z=32,B=f(z);255>z;z++,B=f(z).toLowerCase())-1!==l.indexOf(B)&&l.push(B);l.sort();b.tinysort={id:"TinySort",version:"1.3.27",copyright:"Copyright (c) 2008-2012 Ron Valstar",uri:"http://tinysort.sjeiti.com/",
licenced:{MIT:"http://www.opensource.org/licenses/mit-license.php",GPL:"http://www.gnu.org/licenses/gpl.html"},defaults:{order:"asc",attr:null,data:null,useVal:c,place:"start",returns:c,cases:c,forceStrings:c,sortFunction:null,charOrder:k}};b.fn.extend({tinysort:function(u,z){u&&"string"!=typeof u&&(z=u,u=null);var q=b.extend({},b.tinysort.defaults,z),H,B=b(this).length,r={},N=!(!u||""==u),T=!(null===q.attr||""==q.attr),U=null!==q.data,O=N&&":"==u[0],V=O?this.filter(u):this,s=q.sortFunction,P="asc"==
q.order?1:-1,Q=[];if(q.charOrder!=k)if(k=q.charOrder){p=l.slice(0);t=!1;for(var v=[],C=function(b,c){v.push(c);y[q.cases?b:b.toLowerCase()]=c},w="",A="z",K=k.length,m,J,n=0;n<K;n++){var G=k[n],D=G.charCodeAt(),D=96<D&&123>D;if(!D)if("["==G){var R=(m=v.length)?v[m-1]:A,E=k.substr(n+1).match(/[^\]]*/)[0],L=E.match(/{[^}]*}/g);if(L)for(m=0,J=L.length;m<J;m++){var M=L[m],n=n+M.length,E=E.replace(M,"");C(M.replace(/[{}]/g,""),R);t=!0}m=0;for(J=E.length;m<J;m++)C(R,E[m]);n+=E.length+1}else"{"==G?(m=k.substr(n+
1).match(/[^}]*/)[0],C(m,f(x++)),n+=m.length+1,t=!0):v.push(G);v.length&&(D||n===K-1)&&(m=v.join(""),w+=m,b.each(m,function(b,c){p.splice(p.indexOf(c),1)}),m=v.slice(0),m.splice(0,0,p.indexOf(A)+1,0),Array.prototype.splice.apply(p,m),v.length=0);n+1===K?I=RegExp("["+w+"]","gi"):D&&(A=G)}}else t=!1,x=9472,y={},I=p=null;s||(s="rand"==q.order?function(){return 0.5>Math.random()?1:-1}:function(b,d){var f=c,k=q.cases?b.s:b.s&&b.s.toLowerCase?b.s.toLowerCase():b.s,l=q.cases?d.s:d.s&&d.s.toLowerCase?d.s.toLowerCase():
d.s;if(!q.forceStrings){var m=k&&k.match(g),n=l&&l.match(g);if(m&&n){var s=k.substr(0,k.length-m[0].length),u=l.substr(0,l.length-n[0].length);s==u&&(f=!c,k=e(m[0]),l=e(n[0]))}}m=P*(k<l?-1:k>l?1:0);if(!f&&q.charOrder){if(t)for(var r in y)f=y[r],k=k.replace(r,f),l=l.replace(r,f);if(null!==k.match(I)||null!==l.match(I))for(r=0,f=h(k.length,l.length);r<f&&!(m=p.indexOf(k[r]),n=p.indexOf(l[r]),m=P*(m<n?-1:m>n?1:0));r++);}return m});this.each(function(c,d){var e=b(d),f=N?O?V.filter(d):e.find(u):e,g=U?
""+f.data(q.data):T?f.attr(q.attr):q.useVal?f.val():f.text(),h=e.parent();r[h]||(r[h]={s:[],n:[]});0<f.length?r[h].s.push({s:g,e:e,n:c}):r[h].n.push({e:e,n:c})});for(H in r)r[H].s.sort(s);for(H in r){var s=r[H],S=[],F=B,C=[0,0];switch(q.place){case "first":b.each(s.s,function(b,c){F=h(F,c.n)});break;case "org":b.each(s.s,function(b,c){S.push(c.n)});break;case "end":F=s.n.length;break;default:F=0}for(n=0;n<B;n++)w=d(S,n)?!c:n>=F&&n<F+s.s.length,A=(w?s.s:s.n)[C[w?0:1]].e,A.parent().append(A),!w&&q.returns||
Q.push(A.get(0)),C[w?0:1]++}this.length=0;Array.prototype.push.apply(this,Q);return this}});b.fn.TinySort=b.fn.Tinysort=b.fn.tsort=b.fn.tinysort})(jQuery);var config={home:"//ddiary.loc/"};config.popup=config.home+"ajax/showpopup";config.add_event=config.home+"ajax/addevent";config.events=config.home+"ajax/events";config.edit=config.home+"ajax/editevent";config.changedate=config.home+"ajax/changedate";config.remove=config.home+"ajax/delete";config.done=config.home+"ajax/done";config.not_done=config.home+"ajax/not_done";config.access=config.home+"ajax/access";config.loc=window.location.pathname.split("/");
3<config.loc.length&&(config.add_event+="/"+config.loc[3]+"/"+config.loc[4],config.events+="/"+config.loc[3]+"/"+config.loc[4]);
$(document).ready(function(){$.get(config.popup,function(b){$("div.temp").data("popup",b)});load_events($("#day-events"));$("div.cal-cell").popover({trigger:"manual",html:!0,content:function(){return $("div.temp").data("popup")}});$(".alert").alert();show_active_tab();$("div.cal-cell").click(function(){var b=$(this).find("div.day").html();$(".calendar .cal-cell").not(this).popover("hide");!1==$(this).hasClass("cal-active")?load_events($("#day-events"),b):($(this).popover("toggle"),$(".popover-content .details").hide(),
ready_time($("input#time")));$(".calendar .cal-cell").removeClass("cal-active");$(this).addClass("cal-active")});$(".close-popover").live("click",function(){$(".calendar .cal-cell").popover("hide");$(".popover-content .details").hide()});$(document).keyup(function(b){27==b.keyCode&&($(".calendar .cal-cell").popover("hide"),$(".popover-content .details").hide())});$(".show-details").live("click",function(b){b.preventDefault();$(".popover-content .details").toggle();0==$("div.wysiwyg").length&&(b=new Wysiwyg,
$(".area").before(b.el));$(this).children("i").toggleClass("icon-chevron-down");$(this).children("i").toggleClass("icon-chevron-up")});$("#add-event").live("click",function(b){b.preventDefault();b=$("div.cal-active").find(".day").html();var d=$("input.time_p").val(),c=$("input.event_p").val(),e=$("div.area").text();""!=b&""!=c?$.ajax({type:"POST",url:config.add_event,dataType:"json",data:{day:b,time:d,event:c,description:e},success:function(b){"Added"==b.result?(change_count("+"),$(".popover-add").response(ui_lang.cal_added,
!0),$("p.event-info").remove(),add_event(b.id,d,c,e),$("div#event-conteiner > div").tsort("span.time"),$(".close-popover").trigger("click")):$(".popover-add").response(b.result,!1)},fail:function(){$(".popover-add").response(ui_lang.server_side_error,!1)}}):$(".popover-add").response(ui_lang.cal_no_values,!1)});$("button.show-desc").live("click",function(){$(this).parent(".description").toggleClass("closed");$(this).children("i").toggleClass("icon-chevron-down");$(this).children("i").toggleClass("icon-chevron-up")});
$("button.toggle-cal").live("click",function(){$("tbody#cal-body").toggle();$(this).children("i").toggleClass("icon-chevron-up");$(this).children("i").toggleClass("icon-chevron-down");hide_cal_body("tbody#cal-body")});$("button.edit-event").live("click",function(){$(this).removeClass("edit-event btn-primary");$(this).addClass("btn-success save-event");$(this).html(ui_lang.save);var b=$(this).parents(":eq(2)");b.find("span.time").attr("contentEditable","true").forcetime();b.find("h3.event-name").attr("contentEditable",
"true");var d=b.find("div.desc-field");0<d.length?(b.find("div.description").removeClass("closed"),d.attr("contentEditable","true"),0==$("div.wysiwyg").length&&(b=new Wysiwyg,d.before(b.el))):(b.append('<div class="description"><div class="desc-field" contentEditable="true"></div></div>'),0==$("div.wysiwyg").length&&(b=new Wysiwyg,$("div.desc-field").before(b.el)))});$("a.delete-event").live("click",function(){var b=$(this).parents(":eq(4)"),d=b.find("button.edit-event").attr("id");void 0!=d?$.ajax({type:"POST",
url:config.remove,data:{id:d},success:function(c){"deleted"==c?(b.parent().response(ui_lang.cal_evt_deleted,!0),change_count("-"),b.remove()):b.response(ui_lang.cal_error_del,!1)},fail:function(){alert(ui_lang.fail)}}):alert(ui_lang.finish_editing)});$("a.done-event").live("click",function(){var b=$(this).parents(":eq(4)"),d=b.find("button.edit-event").attr("id");void 0!=d?$.ajax({type:"POST",url:config.done,data:{id:d},success:function(c){"done"==c?(b.find("h3.event-name").addClass("event-done"),
b.find("a.done-event").addClass("hide"),b.find("a.not-done-event").removeClass("hide")):b.response(c,!1)},fail:function(){alert(ui_lang.fail)}}):alert(ui_lang.finish_editing)});$("a.not-done-event").live("click",function(){var b=$(this).parents(":eq(4)"),d=b.find("button.edit-event").attr("id");void 0!=d?$.ajax({type:"POST",url:config.not_done,data:{id:d},success:function(c){"done"==c?(b.find("h3.event-name").removeClass("event-done"),b.find("a.done-event").removeClass("hide"),b.find("a.not-done-event").addClass("hide")):
b.response(c,!1)},fail:function(){alert(ui_lang.fail)}}):alert(ui_lang.finish_editing)});$("button.save-event").live("click",function(){var b=$(this).parents(":eq(2)");time_el=b.find("span.time");event_el=b.find("h3.event-name");desc_el=b.find("div.desc-field");var d=$(this).attr("id"),c=$("h2#active-date").html().slice(0,-1),e=time_el.html(),f=event_el.html(),h=desc_el.html(),g=$(this);""!=c&""!=f?$.ajax({type:"POST",url:config.edit,data:{id:d,day:c,time:e,data:f,description:h},success:function(c){switch(c){case "error":b.response(ui_lang.cal_couldnt_save,
!1);time_el.attr("contentEditable","false");event_el.attr("contentEditable","false");desc_el.attr("contentEditable","false");g.removeClass("save-event btn-success");g.addClass("btn-primary edit-event");g.html(ui_lang.edit);break;case "reserved":b.response(ui_lang.cal_time_reserved);break;default:time_el.attr("contentEditable","false"),event_el.attr("contentEditable","false"),desc_el.attr("contentEditable","false"),$("div.wysiwyg").remove(),g.removeClass("save-event btn-success"),g.addClass("btn-primary edit-event"),
g.html(ui_lang.edit),$("div#event-container > div").tsort("span.time")}},fail:function(){b.response(ui_lang.fail,!1);time_el.attr("contentEditable","false");event_el.attr("contentEditable","false");desc_el.attr("contentEditable","false")}}):alert(ui_lang.no_values);desc_button()});$(document).on("hover",".change-event",function(){$(this).datepicker("show");$(document).on("hover",".delete-event",function(){$(".change-event").datepicker("hide")});$(document).on("hover",".done-event",function(){$(".change-event").datepicker("hide")});
$(this).datepicker().on("changeDate",function(b){var d=$(this).parents(":eq(4)"),c=d.find("button.edit-event").attr("id"),e=getFormatedDate(b.date);if(void 0!=c){if(b.date.getTime()==getSelDate().getTime())return!1;$.ajax({type:"POST",url:config.changedate,data:{id:c,newdate:e},success:function(c){"changed"==c?(d.parent().response(ui_lang.cal_date_changed+e,!0),change_count("-"),b.date.getMonth()==getSelDate().getMonth()&&find_increment(b.date.getDate()),d.remove()):d.response(ui_lang.cal_error_change,
!1)},fail:function(){alert(ui_lang.fail)}})}else alert(ui_lang.finish_editing);$(this).datepicker("hide");b.stopPropogation()})});$(".show-small-cal").on("click",function(){$(this).datepicker({viewMode:1}).on("changeMonth",function(b){$(this).datepicker("hide");location.href=config.home+"simplecal/show/"+b.date.getFullYear()+"/"+getZBM(b.date)});$(this).datepicker("show")});$("#show-add").live("click",function(){$("#event-container").hide();$(".calendar .cal-cell").popover("hide");$("#add-section").fadeIn("fast");
if(0==$("div.wysiwyg").length){var b=new Wysiwyg;$(".area").before(b.el)}$(this).hide();ready_time($("input#time"))});$("#hide-add").live("click",function(b){b.preventDefault();$("div.wysiwyg").remove();$("#add-section").hide();$("#show-add").fadeIn("fast");$("#event-container").fadeIn("fast")});$("#main-add").live("click",function(b){b.preventDefault();b=$("h2#active-date").html().slice(0,-1);var d=$("#time").val(),c=$("#event").val(),e=$("div.area")[0].innerHTML;""!=b&""!=c?$.ajax({type:"POST",
url:config.add_event,dataType:"json",data:{day:b,time:d,event:c,description:e},success:function(b){"Added"==b.result?(change_count("+"),add_event(b.id,d,c,e),$("p.event-info").remove(),$("div#event-container > div").tsort("span.time"),$("#hide-add").trigger("click"),$("div#event-container").response(ui_lang.cal_added,!0)):$(".popover-add").response(b.result,!1)},fail:function(){$(".popover-add").response(ui_lang.server_side_error,!1)}}):$(".popover-add").response(ui_lang.no_values,!1)});$("form :input").change(function(){$(this).closest("form").data("changed",
!0)});$("ul.nav-tabs li a").click(function(){$.totalStorage("opened_tab",$(this).attr("href"))});$("#userSettings").click(function(b){b.preventDefault();b=$("#user_settings");if($(this).closest("form").data("changed")){var d=!1;$.each(b.find("input"),function(){if(""==this.value||void 0==this.value)d=!0});d?$("#user_settings").response(ui_lang.no_values,!1):(b=$("#user_settings"),b.attr("action",config.home+"settings/process_user"),b.submit())}else $("#user_settings").response(ui_lang.no_change,!1)});
$("a.bt_hide").live("click",function(b){b.preventDefault();b=$(this).attr("href");$(b).toggle();$(b).next().toggle();$(this).children("i").toggleClass("icon-chevron-up");$(this).children("i").toggleClass("icon-chevron-down");set_hidden(b)});$("#delete_acc_button").click(function(){if(confirm(ui_lang.delete_acc))window.location=config.home+"logout/app/delete";else return!1});$("#access_log").click(function(){$.get(config.access,function(b){b=eval(b);b[0].message||(2>$("#accessTable tr").length&&b.forEach(function(b){$("#accessTable").append("<tr><td>"+
b.ip+"</td><td>"+b.time+"</td><td>"+b.client+"</td></tr>")}),$("#accessModal").modal("show"))})})});jQuery.fn.forcetime=function(){return this.each(function(){$(this).focusout(function(){""==this.innerHTML&&(this.innerHTML="0:00")});$(this).keydown(function(b){b=b.charCode||b.keyCode||0;return 8==b||9==b||46==b||186==b||37<=b&&40>=b||48<=b&&57>=b||96<=b&&105>=b})})};
function hide_hidden(){var b=$.totalStorage("hidden_sections");if($.isArray(b))for(var d in b)$(b[d]).hide(),$(b[d]).next().hide(),$("a[href$="+b[d]+"]").children("i").attr("class","icon-chevron-down")}function set_hidden(b){var d=[],d=$.totalStorage("hidden_sections");$.isArray(d)?-1==$.inArray(b,d)?d.push(b):(b=d.indexOf(b),d.splice(b,1)):(d=[],d.push(b));$.totalStorage("hidden_sections",d)}
function change_count(b,d){var c=$(".cal-active").find("span.events");if(0<c.length){var e=c.text(),e=parseInt(e);"-"==b?e--:e++;0<e?c.text(e):($(".cal-active").find("span.events").remove(),d=$(".cal-active").find("div.day"),d.hasClass("bold")||d.addClass("no-events"))}else $(".cal-active").find("div.day").removeClass("no-events"),$(".cal-active").append('<span class="events">1</span>')}
jQuery.fn.response=function(b,d){var c="alert-error";!0==d&&(c="alert-success");this.prepend('<div class="alert '+c+'">'+b+'<a class="close" data-dismiss="alert" href="#">&times;</a></div>');setTimeout("$('.alert').alert('close');",5E3)};
function load_events(b,d){null==d&&(d=$("div.cal-active").find("div.day").html());$("#day-events").html('<div class="progress progress-striped active"><div class="bar"></div></div>');""!=d?$.ajax({type:"POST",url:config.events,data:{day:d},success:function(c){b.html(c);desc_button();$("#day-events").trigger("data_fetch")},fail:function(){b.html("<p>"+ui_lang.server_side_error+"</p>")}}):alert(ui_lang.no_values)}
function desc_button(){$("div.desc-field").each(function(){60<$(this).height()?0==$(this).parent().find("button.show-desc").length&&$(this).before('<button class="btn show-desc" title="details.."><i class="icon-chevron-down"></i></button>'):$(this).parent().find("button.show-desc").remove();""==$(this).text()&&($(this).parent().remove(),$(this).remove())})}
function add_event(b,d,c,e){""==d&&(d="0:00");var f=getFormatedDate(getSelDate());b='<div class="event-item"><div class="controlls"><div class="btn-group"><button class="btn btn-primary edit-event" id="'+b+'">'+ui_lang.edit+'</button><button class="btn dropdown-toggle btn-primary" data-toggle="dropdown"><span class="caret"></span></button><ul class="dropdown-menu"><li><a href="#" class="done-event">'+ui_lang.done+'</a></li><li><a href="#" class="change-event" data-date-format="yyyy-mm-dd" data-date="'+
f+'">'+ui_lang.change_date+'</a></li><li class="divider"></li><li><a href="#" class="delete-event">'+ui_lang["delete"]+"</a></li></ul></div></div>";b+='<span class="time">'+d+'</span><h3 class="event-name">&nbsp;'+c+"</h3>";""!=e&&(b+='<div class="description closed"><div class="desc-field">'+e+"</div></div>");b+="</div>";$("div#event-container").append(b)}
function ready_time(b){b.focus().typeahead({source:"00:00 1:00 2:00 3:00 4:00 5:00 6:00 7:00 8:00 9:00 10:00 11:00 12:00 13:00 14:00 15:00 16:00 17:00 18:00 19:00 20:00 21:00 22:00 23:00 1:10 1:20 1:30 1:40 1:50 2:10 2:20 2:30 2:40 2:50 3:10 3:20 3:30 3:40 3:50 4:10 4:20 4:30 4:40 4:50 5:10 5:20 5:30 5:40 5:50 6:10 6:20 6:30 6:40 6:50 7:10 7:20 7:30 7:40 7:50 8:10 8:20 8:30 8:40 8:50 9:10 9:20 9:30 9:40 9:50 10:10 10:20 10:30 10:40 10:50 11:10 11:20 11:30 11:40 11:50 12:10 12:20 12:30 12:40 12:50 13:10 13:20 13:30 13:40 13:50 14:10 14:20 14:30 14:40 14:50 15:10 15:20 15:30 15:40 15:50 16:10 16:20 16:30 16:40 16:50 17:10 17:20 17:30 17:40 17:50 18:10 18:20 18:30 18:40 18:50 19:10 19:20 19:30 19:40 19:50 20:10 20:20 20:30 20:40 20:50 21:10 21:20 21:30 21:40 21:50 22:10 22:20 22:30 22:40 22:50 23:10 23:20 23:30 23:40 23:50".split(" "),items:"6"});
b.forcetime()}function getSelDate(){var b=$(".cal-active").find("div.day").html(),d=$("table.calendar").attr("id"),c=d.match(/[0-9]{4}/),d=d.match(/[0-9]{2}$/);return null!=b?new Date(c,d-1,b):new Date}function getFormatedDate(b){var d=b.getDate(),c=b.getMonth()+1;return b.getFullYear()+"-"+c+"-"+d}function getZBM(b){b=b?b:new Date;month=b.getMonth();return 10>month?"0"+(month+1):month+1}
function find_increment(b){b=$("#cal-body").find("div.day:textEquals('"+b+"')");b.removeClass("no-events");events=b.parent().find("span.events");0<events.length?(b=events.text(),b=parseInt(b),b++,events.text(b)):b.parent().append('<span class="events">1</span>')}function show_active_tab(){var b=$.totalStorage("opened_tab");void 0!=b?$('.nav-tabs a[href="'+b+'"]').tab("show"):$(".nav-tabs a:first").tab("show")}$.expr[":"].textEquals=function(b,d,c){return(b=$(b).text().match("^"+c[3]+"$"))&&0<b.length};
