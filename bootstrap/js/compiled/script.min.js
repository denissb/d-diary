!function(a){a(function(){var c=a.support,b;a:{b=document.createElement("bootstrap");var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},d;for(d in e)if(void 0!==b.style[d]){b=e[d];break a}b=void 0}c.transition=b&&{end:b}})}(window.jQuery);
!function(a){var c=function(b){a(b).on("click",'[data-dismiss="alert"]',this.close)};c.prototype.close=function(b){function e(){g.trigger("closed").remove()}var c=a(this),f=c.attr("data-target"),g;f||(f=(f=c.attr("href"))&&f.replace(/.*(?=#[^\s]*$)/,""));g=a(f);b&&b.preventDefault();g.length||(g=c.hasClass("alert")?c:c.parent());g.trigger(b=a.Event("close"));b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.on(a.support.transition.end,e):e())};a.fn.alert=function(b){return this.each(function(){var e=
a(this),d=e.data("alert");d||e.data("alert",d=new c(this));"string"==typeof b&&d[b].call(e)})};a.fn.alert.Constructor=c;a(function(){a("body").on("click.alert.data-api",'[data-dismiss="alert"]',c.prototype.close)})}(window.jQuery);
!function(a){var c=function(b,c){this.$element=a(b);this.options=a.extend({},a.fn.button.defaults,c)};c.prototype.setState=function(b){var a=this.$element,c=a.data(),f=a.is("input")?"val":"html";b+="Text";c.resetText||a.data("resetText",a[f]());a[f](c[b]||this.options[b]);setTimeout(function(){"loadingText"==b?a.addClass("disabled").attr("disabled","disabled"):a.removeClass("disabled").removeAttr("disabled")},0)};c.prototype.toggle=function(){var b=this.$element.parent('[data-toggle="buttons-radio"]');
b&&b.find(".active").removeClass("active");this.$element.toggleClass("active")};a.fn.button=function(b){return this.each(function(){var e=a(this),d=e.data("button"),f="object"==typeof b&&b;d||e.data("button",d=new c(this,f));"toggle"==b?d.toggle():b&&d.setState(b)})};a.fn.button.defaults={loadingText:"loading..."};a.fn.button.Constructor=c;a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(b){b=a(b.target);b.hasClass("btn")||(b=b.closest(".btn"));b.button("toggle")})})}(window.jQuery);
!function(a){function c(){a(b).parent().removeClass("open")}var b='[data-toggle="dropdown"]',e=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};e.prototype={constructor:e,toggle:function(b){b=a(this);var e;if(!b.is(".disabled, :disabled"))return e=b.attr("data-target"),e||(e=(e=b.attr("href"))&&e.replace(/.*(?=#[^\s]*$)/,"")),e=a(e),e.length||(e=b.parent()),b=e.hasClass("open"),c(),b||e.toggleClass("open"),
!1}};a.fn.dropdown=function(b){return this.each(function(){var c=a(this),g=c.data("dropdown");g||c.data("dropdown",g=new e(this));"string"==typeof b&&g[b].call(c)})};a.fn.dropdown.Constructor=e;a(function(){a("html").on("click.dropdown.data-api",c);a("body").on("click.dropdown",".dropdown form",function(b){b.stopPropagation()}).on("click.dropdown.data-api",b,e.prototype.toggle)})}(window.jQuery);
!function(a){function c(){var c=this,e=setTimeout(function(){c.$element.off(a.support.transition.end);b.call(c)},500);this.$element.one(a.support.transition.end,function(){clearTimeout(e);b.call(c)})}function b(b){this.$element.hide().trigger("hidden");e.call(this)}function e(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&c;this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body);"static"!=this.options.backdrop&&
this.$backdrop.click(a.proxy(this.hide,this));e&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(d,this)):d.call(this)):b&&b()}function d(){this.$backdrop.remove();this.$backdrop=null}function f(){var b=this;if(this.isShown&&this.options.keyboard)a(document).on("keyup.dismiss.modal",
function(a){27==a.which&&b.hide()});else this.isShown||a(document).off("keyup.dismiss.modal")}var g=function(b,c){this.options=c;this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this))};g.prototype={constructor:g,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c);this.isShown||c.isDefaultPrevented()||(a("body").addClass("modal-open"),this.isShown=!0,f.call(this),e.call(this,
function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body);b.$element.show();c&&b.$element[0].offsetWidth;b.$element.addClass("in");c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")}))},hide:function(e){e&&e.preventDefault();e=a.Event("hide");this.$element.trigger(e);this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,a("body").removeClass("modal-open"),f.call(this),
this.$element.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?c.call(this):b.call(this))}};a.fn.modal=function(b){return this.each(function(){var c=a(this),e=c.data("modal"),d=a.extend({},a.fn.modal.defaults,c.data(),"object"==typeof b&&b);e||c.data("modal",e=new g(this,d));if("string"==typeof b)e[b]();else d.show&&e.show()})};a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0};a.fn.modal.Constructor=g;a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',
function(b){var c=a(this),e,d=a(c.attr("data-target")||(e=c.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")),c=d.data("modal")?"toggle":a.extend({},d.data(),c.data());b.preventDefault();d.modal(c)})})}(window.jQuery);
!function(a){var c=function(b,a){this.init("tooltip",b,a)};c.prototype={constructor:c,init:function(b,c,d){this.type=b;this.$element=a(c);this.options=this.getOptions(d);this.enabled=!0;"manual"!=this.options.trigger&&(b="hover"==this.options.trigger?"mouseenter":"focus",c="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(b,this.options.selector,a.proxy(this.enter,this)),this.$element.on(c,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},
this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){b=a.extend({},a.fn[this.type].defaults,b,this.$element.data());b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay});return b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout);c.hoverState="in";this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)},
leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out";this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)},show:function(){var b,a,c,f,g,h,k;if(this.hasContent()&&this.enabled){b=this.tip();this.setContent();this.options.animation&&b.addClass("fade");h="function"==typeof this.options.placement?this.options.placement.call(this,
b[0],this.$element[0]):this.options.placement;a=/in/.test(h);b.remove().css({top:0,left:0,display:"block"}).appendTo(a?this.$element:document.body);c=this.getPosition(a);f=b[0].offsetWidth;g=b[0].offsetHeight;switch(a?h.split(" ")[1]:h){case "bottom":k={top:c.top+c.height,left:c.left+c.width/2-f/2};break;case "top":k={top:c.top-g,left:c.left+c.width/2-f/2};break;case "left":k={top:c.top+c.height/2-g/2,left:c.left-f};break;case "right":k={top:c.top+c.height/2-g/2,left:c.left+c.width}}b.css(k).addClass(h).addClass("in")}},
isHTML:function(b){return"string"!=typeof b||"<"===b.charAt(0)&&">"===b.charAt(b.length-1)&&3<=b.length||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(b)},setContent:function(){var b=this.tip(),a=this.getTitle();b.find(".tooltip-inner")[this.isHTML(a)?"html":"text"](a);b.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b);c.remove()})}var c=this.tip();c.removeClass("in");
a.support.transition&&this.$tip.hasClass("fade")?b():c.remove()},fixTitle:function(){var b=this.$element;(b.attr("title")||"string"!=typeof b.attr("data-original-title"))&&b.attr("data-original-title",b.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var b=this.$element,a=this.options;
return b.attr("data-original-title")||("function"==typeof a.title?a.title.call(b[0]):a.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};a.fn.tooltip=function(b){return this.each(function(){var e=
a(this),d=e.data("tooltip"),f="object"==typeof b&&b;d||e.data("tooltip",d=new c(this,f));if("string"==typeof b)d[b]()})};a.fn.tooltip.Constructor=c;a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0}}(window.jQuery);
!function(a){var c=function(b,a){this.init("popover",b,a)};c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:c,setContent:function(){var b=this.tip(),a=this.getContent();b.find(".popover-container")[this.isHTML(a)?"html":"text"](a);b.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var b=this.$element,a=this.options;return b.attr("data-content")||("function"==typeof a.content?a.content.call(b[0]):
a.content)},tip:function(){this.$tip||(this.$tip=a(this.options.template));return this.$tip}});a.fn.popover=function(b){return this.each(function(){var e=a(this),d=e.data("popover"),f="object"==typeof b&&b;d||e.data("popover",d=new c(this,f));if("string"==typeof b)d[b]()})};a.fn.popover.Constructor=c;a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="popover-container"></div></div>'})}(window.jQuery);
!function(a){var c=function(b){this.element=a(b)};c.prototype={constructor:c,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),f,g;d||(d=(d=b.attr("href"))&&d.replace(/.*(?=#[^\s]*$)/,""));b.parent("li").hasClass("active")||(f=c.find(".active a").last()[0],g=a.Event("show",{relatedTarget:f}),b.trigger(g),g.isDefaultPrevented()||(d=a(d),this.activate(b.parent("li"),c),this.activate(d,d.parent(),function(){b.trigger({type:"shown",relatedTarget:f})})))},
activate:function(b,c,d){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");b.addClass("active");h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active");d&&d()}var g=c.find("> .active"),h=d&&a.support.transition&&g.hasClass("fade");h?g.one(a.support.transition.end,f):f();g.removeClass("in")}};a.fn.tab=function(b){return this.each(function(){var e=a(this),d=e.data("tab");d||e.data("tab",
d=new c(this));if("string"==typeof b)d[b]()})};a.fn.tab.Constructor=c;a(function(){a("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault();a(this).tab("show")})})}(window.jQuery);
!function(a){var c=function(b,c){this.$element=a(b);this.options=a.extend({},a.fn.typeahead.defaults,c);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.$menu=a(this.options.menu).appendTo("body");this.source=this.options.source;this.shown=!1;this.listen()};c.prototype={constructor:c,select:function(){var b=this.$menu.find(".active").attr("data-value");
this.$element.val(this.updater(b)).change();return this.hide()},updater:function(b){return b},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.$menu.css({top:b.top+b.height,left:b.left});this.$menu.show();this.shown=!0;return this},hide:function(){this.$menu.hide();this.shown=!1;return this},lookup:function(b){var c=this;this.query=this.$element.val();if(!this.query)return this.shown?this.hide():this;b=a.grep(this.source,function(b){return c.matcher(b)});
b=this.sorter(b);return b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(b){return~b.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(b){for(var a=[],c=[],f=[],g;g=b.shift();)g.toLowerCase().indexOf(this.query.toLowerCase())?~g.indexOf(this.query)?c.push(g):f.push(g):a.push(g);return a.concat(c,f)},highlighter:function(b){var a=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return b.replace(RegExp("("+a+")","ig"),function(b,
a){return"<strong>"+a+"</strong>"})},render:function(b){var c=this;b=a(b).map(function(b,f){b=a(c.options.item).attr("data-value",f);b.find("a").html(c.highlighter(f));return b[0]});b.first().addClass("active");this.$menu.html(b);return this},next:function(b){b=this.$menu.find(".active").removeClass("active").next();b.length||(b=a(this.$menu.find("li")[0]));b.addClass("active")},prev:function(b){b=this.$menu.find(".active").removeClass("active").prev();b.length||(b=this.$menu.find("li").last());b.addClass("active")},
listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this));if(a.browser.webkit||a.browser.msie)this.$element.on("keydown",a.proxy(this.keypress,this));this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},keyup:function(b){switch(b.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;
default:this.lookup()}b.stopPropagation();b.preventDefault()},keypress:function(b){if(this.shown){switch(b.keyCode){case 9:case 13:case 27:b.preventDefault();break;case 38:if("keydown"!=b.type)break;b.preventDefault();this.prev();break;case 40:if("keydown"!=b.type)break;b.preventDefault();this.next()}b.stopPropagation()}},blur:function(b){var a=this;setTimeout(function(){a.hide()},150)},click:function(b){b.stopPropagation();b.preventDefault();this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active");
a(b.currentTarget).addClass("active")}};a.fn.typeahead=function(b){return this.each(function(){var e=a(this),d=e.data("typeahead"),f="object"==typeof b&&b;d||e.data("typeahead",d=new c(this,f));if("string"==typeof b)d[b]()})};a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'};a.fn.typeahead.Constructor=c;a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);c.data("typeahead")||
(b.preventDefault(),c.typeahead(c.data()))})})}(window.jQuery);
!function(a){var c=function(b,c){this.$element=a(b);this.options=a.extend({},a.fn.collapse.defaults,c);this.options.parent&&(this.$parent=a(this.options.parent));this.options.toggle&&this.toggle()};c.prototype={constructor:c,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var b,c,d,f;if(!this.transitioning){b=this.dimension();c=a.camelCase(["scroll",b].join("-"));if((d=this.$parent&&this.$parent.find("> .accordion-group > .in"))&&d.length){if((f=d.data("collapse"))&&
f.transitioning)return;d.collapse("hide");f||d.data("collapse",null)}this.$element[b](0);this.transition("addClass",a.Event("show"),"shown");a.support.transition&&this.$element[b](this.$element[0][c])}},hide:function(){var b;this.transitioning||(b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0))},reset:function(b){var a=this.dimension();this.$element.removeClass("collapse")[a](b||"auto")[0].offsetWidth;this.$element[null!==
b?"addClass":"removeClass"]("collapse");return this},transition:function(b,c,d){var f=this,g=function(){"show"==c.type&&f.reset();f.transitioning=0;f.$element.trigger(d)};this.$element.trigger(c);c.isDefaultPrevented()||(this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,g):g())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};a.fn.collapse=function(b){return this.each(function(){var e=
a(this),d=e.data("collapse"),f="object"==typeof b&&b;d||e.data("collapse",d=new c(this,f));if("string"==typeof b)d[b]()})};a.fn.collapse.defaults={toggle:!0};a.fn.collapse.Constructor=c;a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d;b=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"");d=a(b).data("collapse")?"toggle":c.data();c[a(b).hasClass("in")?"addClass":"removeClass"]("collapsed");a(b).collapse(d)})})}(window.jQuery);
!function(a){var c=function(b){this.element=a(b)};c.prototype={constructor:c,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),f,g;d||(d=(d=b.attr("href"))&&d.replace(/.*(?=#[^\s]*$)/,""));b.parent("li").hasClass("active")||(f=c.find(".active:last a")[0],g=a.Event("show",{relatedTarget:f}),b.trigger(g),g.isDefaultPrevented()||(d=a(d),this.activate(b.parent("li"),c),this.activate(d,d.parent(),function(){b.trigger({type:"shown",relatedTarget:f})})))},activate:function(b,
c,d){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");b.addClass("active");h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade");b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active");d&&d()}var g=c.find("> .active"),h=d&&a.support.transition&&g.hasClass("fade");h?g.one(a.support.transition.end,f):f();g.removeClass("in")}};a.fn.tab=function(b){return this.each(function(){var e=a(this),d=e.data("tab");d||e.data("tab",d=new c(this));
if("string"==typeof b)d[b]()})};a.fn.tab.Constructor=c;a(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault();a(this).tab("show")})}(window.jQuery);$(document).ready(function(){window.err_msg=ui_lang.check_all_fields;$("#email-input").keydown(function(){is_valid_email($(this).val())?($(this).removeClass("error"),$(this).addClass("success")):(window.err_msg=ui_lang.invalid_email,$(this).removeClass("success"),$(this).addClass("error"))});$("#pass-input").keydown(function(){check_strength($(this))});$("#login-input").keydown(function(){3<$(this).val().length?($(this).removeClass("error"),$(this).addClass("success")):(window.err_msg=ui_lang.short_username,
$(this).removeClass("success"),$(this).addClass("error"))});confirm_val($("#email-confirm"));confirm_val($("#pass-confirm"));$("#signup").click(function(){5==$(".success").size()?$.ajax({type:"POST",url:"//ddiary.loc/signup/validate",data:{username:$("#login-input").val(),password:$("#pass-input").val(),email:$("#email-input").val(),terms:$("#agree-terms:checked").val(),capatcha:$("#capatcha-confirm").val()},success:function(a){"valid"==a?$("#registration").submit():$(".register").response(a,!1)},
fail:function(){$(".register").response(ui_lang.server_error,!1)}}):$(".register").response(window.err_msg,!1)});$("#refresh_capatcha").click(function(){$.ajax({type:"GET",url:"//ddiary.loc/signup/capatcha",success:function(a){$(".terms_td").children("img").replaceWith(a)},fail:function(){$(".register").response(ui_lang.server_error,!1)}})});$("#old-pass").keydown(function(){check_strength($(this))});$("#change_password").click(function(a){a.preventDefault();if(3>$(".success").size())$(".pass-change").response(window.err_msg,
!1);else{a=$("#old-pass").val();var c=$("#pass-input").val();a===c?($(".pass-change").response(ui_lang.pass_is_same,!1),$("#pass-input").removeClass("success"),$("#pass-input").addClass("error"),$(".icon-thumbs-up").remove()):$.ajax({type:"POST",url:"//ddiary.loc/settings/change_pass",dataType:"json",data:{old_pass:a,new_pass:c,new_pass_repeat:$("#pass-confirm").val()},success:function(b){$(".pass-change").response(b.msg,b.success);b.success&&($('input[type="password"]').val(""),$('input[type="password"]').removeClass("success"),
$(".icon-thumbs-up").remove())}})}})});function confirm_val(a){$(a).change(function(){var c="#"+$(this).attr("id").replace("confirm","input");a.val()==$(c).val()&&""!=$(this).val()?($(this).removeClass("error"),$(this).addClass("success")):($(this).removeClass("success"),$(this).addClass("error"),window.err_msg=ui_lang.invalid_confrimation)})}
function is_valid_email(a){return RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(a)}
function check_strength(a){var c=0,b=a.val();6<b.length?c+=1:window.err_msg=ui_lang.short_pass;b.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(c+=1);b.match(/([a-zA-Z])/)&&b.match(/([0-9])/)&&(c+=1);b.match(/([!,%,&,@,#,$,^,*,?,_,~])/)&&(c+=1);b.match(/(.*[!,%,&,@,#,$,^,*,?,_,~].*[!,",%,&,@,#,$,^,*,?,_,~])/)&&(c+=1);2>c?(a.removeClass("success"),window.err_msg=ui_lang.invalid_pass_combo,a.addClass("error"),$("#pass_result").remove()):2==c?(a.removeClass("error"),a.addClass("success"),$("#pass_result").remove()):
(a.removeClass("error"),a.addClass("success"),a.parent().append('<i class="icon-thumbs-up" id="pass_result"></i>'))}(function(a){jQuery.fn.response=function(a,b){var e="alert-error";!0==b&&(e="alert-success");this.before('<div class="alert '+e+'">'+a+'<a class="close" data-dismiss="alert" href="#">&times;</a></div>');setTimeout("$('.alert').alert('close');",7E3)}})(jQuery);(function(a,c,b){function e(b){return b}function d(b){return decodeURIComponent(b.replace(f," "))}var f=/\+/g,g=a.cookie=function(f,k,n){if(k!==b){n=a.extend({},g.defaults,n);null===k&&(n.expires=-1);if("number"===typeof n.expires){var s=n.expires,w=n.expires=new Date;w.setDate(w.getDate()+s)}k=g.json?JSON.stringify(k):String(k);return c.cookie=[encodeURIComponent(f),"=",g.raw?k:encodeURIComponent(k),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+
n.domain:"",n.secure?"; secure":""].join("")}k=g.raw?e:d;n=c.cookie.split("; ");s=0;for(w=n.length;s<w;s++){var x=n[s].split("=");if(k(x.shift())===f)return f=k(x.join("=")),g.json?JSON.parse(f):f}return null};g.defaults={};a.removeCookie=function(b,c){return null!==a.cookie(b)?(a.cookie(b,null,c),!0):!1}})(jQuery,document);(function(a){var c=window.localStorage,b;b="undefined"==typeof c||"undefined"==typeof window.JSON?!1:!0;a.totalStorage=function(b,c){return a.totalStorage.impl.init(b,c)};a.totalStorage.setItem=function(b,c){return a.totalStorage.impl.setItem(b,c)};a.totalStorage.getItem=function(b){return a.totalStorage.impl.getItem(b)};a.totalStorage.getAll=function(){return a.totalStorage.impl.getAll()};a.totalStorage.deleteItem=function(b){return a.totalStorage.impl.deleteItem(b)};a.totalStorage.impl={init:function(b,
a){return"undefined"!=typeof a?this.setItem(b,a):this.getItem(b)},setItem:function(e,d){if(!b)try{return a.cookie(e,d),d}catch(f){console.log("Local Storage not supported by this browser. Install the cookie plugin on your site to take advantage of the same functionality. You can get it at https://github.com/carhartl/jquery-cookie")}var g=JSON.stringify(d);c.setItem(e,g);return this.parseResult(g)},getItem:function(e){if(!b)try{return this.parseResult(a.cookie(e))}catch(d){return null}return this.parseResult(c.getItem(e))},
deleteItem:function(e){if(!b)try{return a.cookie(e,null),!0}catch(d){return!1}c.removeItem(e);return!0},getAll:function(){var e=[];if(b)for(f in c)f.length&&e.push({key:f,value:this.parseResult(c.getItem(f))});else try{for(var d=document.cookie.split(";"),f=0;f<d.length;f++){var g=d[f].split("=")[0];e.push({key:g,value:this.parseResult(a.cookie(g))})}}catch(h){return null}return e},parseResult:function(b){var a;try{a=JSON.parse(b),"true"==a&&(a=!0),"false"==a&&(a=!1),parseFloat(a)==a&&"object"!=typeof a&&
(a=parseFloat(a))}catch(c){}return a}}})(jQuery);(function(){var a;a=this.jQuery;this.Wysiwyg=function(){function c(b){var c,d;this.options=null!=b?b:{};this.el=a("<div />");d=this.options;for(c in d)b=d[c],this[c]=b;this.el.addClass(this.className);this.delegateEvents(this.events);this.render()}c.name="Wysiwyg";c.prototype.className="wysiwyg";c.prototype.events={"click [data-type=bold]":"bold","click [data-type=italic]":"italic","click [data-type=list]":"list","click [data-type=link]":"link","click [data-type=h2]":"h2","click [data-type=h3]":"h3",
"click a":"cancel"};c.prototype.document=document;c.prototype.render=function(){this.el.empty();this.el.append('<a href="#" data-type="bold" title="bold" class="btn btn-mini"><i class="icon-bold"></i></a>');this.el.append('<a href="#" data-type="list" title="list" class="btn btn-mini"><i class="icon-list-alt"></i></a>');this.el.append('<a href="#" data-type="link" title="link" class="btn btn-mini"><i class="icon-retweet"></a>');return this};c.prototype.bold=function(b){b.preventDefault();if(this.selectTest())return this.exec("bold")};
c.prototype.italic=function(b){b.preventDefault();if(this.selectTest())return this.exec("italic")};c.prototype.list=function(b){b.preventDefault();return this.exec("insertOrderedList")};c.prototype.link=function(b){b.preventDefault();if(this.selectTest()&&(this.exec("unlink"),(b=prompt("Enter a link:","http://"))&&"http://"!==b))return/:\/\//.test(b)||(b="http://"+b),this.exec("createLink",b)};c.prototype.h2=function(b){b.preventDefault();return"h2"===this.query("formatBlock")?this.exec("formatBlock",
"p"):this.exec("formatBlock","h2")};c.prototype.h3=function(b){b.preventDefault();return"h3"===this.query("formatBlock")?this.exec("formatBlock","p"):this.exec("formatBlock","h3")};c.prototype.move=function(b){return this.el.css(b)};c.prototype.cancel=function(b){b.preventDefault();return b.stopImmediatePropagation()};c.prototype.getSelectedText=function(){var b;if(null!=(b=this.document)&&b.selection)return document.selection.createRange().text;if(this.document)return document.getSelection().toString()};
c.prototype.selectTest=function(){return 0===this.getSelectedText().length?(alert("Select some text first."),!1):!0};c.prototype.exec=function(b,a){null==a&&(a=null);return this.document.execCommand(b,!1,a)};c.prototype.query=function(b){return this.document.queryCommandValue(b)};c.prototype.delegateEvents=function(b){var a,c,f,g,h,k=this;h=[];for(c in b)g=b[c],"function"!==typeof g&&(g=function(b){return function(){k[b].apply(k,arguments);return!0}}(g)),f=c.match(/^(\S+)\s*(.*)$/),a=f[1],f=f[2],
""===f?h.push(this.el.bind(a,g)):h.push(this.el.delegate(f,a,g));return h};return c}()}).call(this);(function(a){function c(a,c){for(var e=0,d=a.length;e<d;e++)if(a[e]==c)return!b;return b}var b=!1,e=parseFloat,d=String.fromCharCode,f=Math.min,g=/(-?\d+\.?\d*)$/g,h,k=[],n,s,w=9472,x={},H;Array.indexOf||(Array.prototype.indexOf=function(b){for(var a=0,c=this.length;a<c;a++)if(this[a]==b)return a;return-1});for(var y=32,A=d(y);255>y;y++,A=d(y).toLowerCase())-1!==k.indexOf(A)&&k.push(A);k.sort();a.tinysort={id:"TinySort",version:"1.3.27",copyright:"Copyright (c) 2008-2012 Ron Valstar",uri:"http://tinysort.sjeiti.com/",
licenced:{MIT:"http://www.opensource.org/licenses/mit-license.php",GPL:"http://www.gnu.org/licenses/gpl.html"},defaults:{order:"asc",attr:null,data:null,useVal:b,place:"start",returns:b,cases:b,forceStrings:b,sortFunction:null,charOrder:h}};a.fn.extend({tinysort:function(t,y){t&&"string"!=typeof t&&(y=t,t=null);var p=a.extend({},a.tinysort.defaults,y),G,A=a(this).length,q={},M=!(!t||""==t),S=!(null===p.attr||""==p.attr),T=null!==p.data,N=M&&":"==t[0],U=N?this.filter(t):this,r=p.sortFunction,O="asc"==
p.order?1:-1,P=[];if(p.charOrder!=h)if(h=p.charOrder){n=k.slice(0);s=!1;for(var u=[],B=function(b,a){u.push(a);x[p.cases?b:b.toLowerCase()]=a},v="",z="z",J=h.length,l,I,m=0;m<J;m++){var F=h[m],C=F.charCodeAt(),C=96<C&&123>C;if(!C)if("["==F){var Q=(l=u.length)?u[l-1]:z,D=h.substr(m+1).match(/[^\]]*/)[0],K=D.match(/{[^}]*}/g);if(K)for(l=0,I=K.length;l<I;l++){var L=K[l],m=m+L.length,D=D.replace(L,"");B(L.replace(/[{}]/g,""),Q);s=!0}l=0;for(I=D.length;l<I;l++)B(Q,D[l]);m+=D.length+1}else"{"==F?(l=h.substr(m+
1).match(/[^}]*/)[0],B(l,d(w++)),m+=l.length+1,s=!0):u.push(F);u.length&&(C||m===J-1)&&(l=u.join(""),v+=l,a.each(l,function(b,a){n.splice(n.indexOf(a),1)}),l=u.slice(0),l.splice(0,0,n.indexOf(z)+1,0),Array.prototype.splice.apply(n,l),u.length=0);m+1===J?H=RegExp("["+v+"]","gi"):C&&(z=F)}}else s=!1,w=9472,x={},H=n=null;r||(r="rand"==p.order?function(){return 0.5>Math.random()?1:-1}:function(a,c){var d=b,h=p.cases?a.s:a.s&&a.s.toLowerCase?a.s.toLowerCase():a.s,k=p.cases?c.s:c.s&&c.s.toLowerCase?c.s.toLowerCase():
c.s;if(!p.forceStrings){var l=h&&h.match(g),m=k&&k.match(g);if(l&&m){var r=h.substr(0,h.length-l[0].length),t=k.substr(0,k.length-m[0].length);r==t&&(d=!b,h=e(l[0]),k=e(m[0]))}}l=O*(h<k?-1:h>k?1:0);if(!d&&p.charOrder){if(s)for(var q in x)d=x[q],h=h.replace(q,d),k=k.replace(q,d);if(null!==h.match(H)||null!==k.match(H))for(q=0,d=f(h.length,k.length);q<d&&!(l=n.indexOf(h[q]),m=n.indexOf(k[q]),l=O*(l<m?-1:l>m?1:0));q++);}return l});this.each(function(b,c){var d=a(c),e=M?N?U.filter(c):d.find(t):d,f=T?
""+e.data(p.data):S?e.attr(p.attr):p.useVal?e.val():e.text(),g=d.parent();q[g]||(q[g]={s:[],n:[]});0<e.length?q[g].s.push({s:f,e:d,n:b}):q[g].n.push({e:d,n:b})});for(G in q)q[G].s.sort(r);for(G in q){var r=q[G],R=[],E=A,B=[0,0];switch(p.place){case "first":a.each(r.s,function(b,a){E=f(E,a.n)});break;case "org":a.each(r.s,function(b,a){R.push(a.n)});break;case "end":E=r.n.length;break;default:E=0}for(m=0;m<A;m++)v=c(R,m)?!b:m>=E&&m<E+r.s.length,z=(v?r.s:r.n)[B[v?0:1]].e,z.parent().append(z),!v&&p.returns||
P.push(z.get(0)),B[v?0:1]++}this.length=0;Array.prototype.push.apply(this,P);return this}});a.fn.TinySort=a.fn.Tinysort=a.fn.tsort=a.fn.tinysort})(jQuery);var config={home:"//ddiary.loc/"};config.popup=config.home+"ajax/showpopup";config.add_event=config.home+"ajax/addevent";config.events=config.home+"ajax/events";config.edit=config.home+"ajax/editevent";config.changedate=config.home+"ajax/changedate";config.remove=config.home+"ajax/delete";config.done=config.home+"ajax/done";config.not_done=config.home+"ajax/not_done";config.access=config.home+"ajax/access";config.loc=window.location.pathname.split("/");
3<config.loc.length&&(config.add_event+="/"+config.loc[3]+"/"+config.loc[4],config.events+="/"+config.loc[3]+"/"+config.loc[4]);
$(document).ready(function(){function a(){hasScrollBar()?$("button.toggle-cal").show():$("button.toggle-cal").hide()}$.get(config.popup,function(a){$("div.temp").data("popup",a)});load_events($("#day-events"));$("div.cal-cell").popover({trigger:"manual",html:!0,content:function(){return $("div.temp").data("popup")}});$(".alert").alert();show_active_tab();$("div.cal-cell").click(function(){var a=$(this).find("div.day").html();$(".calendar .cal-cell").not(this).popover("hide");!1==$(this).hasClass("cal-active")?
load_events($("#day-events"),a):($(this).popover("toggle"),$(".popover-content .details").hide(),ready_time($("input#time")));$(".calendar .cal-cell").removeClass("cal-active");$(this).addClass("cal-active")});$(".close-popover").live("click",function(){$(".calendar .cal-cell").popover("hide");$(".popover-content .details").hide()});$(document).keyup(function(a){27==a.keyCode&&($(".calendar .cal-cell").popover("hide"),$(".popover-content .details").hide())});$(".show-details").live("click",function(a){a.preventDefault();
$(".popover-content .details").toggle();0==$("div.wysiwyg").length&&(a=new Wysiwyg,$(".area").before(a.el));$(this).children("i").toggleClass("icon-chevron-down");$(this).children("i").toggleClass("icon-chevron-up")});$("#add-event").live("click",function(a){a.preventDefault();a=$("div.cal-active").find(".day").html();var b=$("input.time_p").val(),e=$("input.event_p").val(),d=$("div.area").text();""!=a&""!=e?$.ajax({type:"POST",url:config.add_event,dataType:"json",data:{day:a,time:b,event:e,description:d},
success:function(a){"Added"==a.result?(change_count("+"),$(".popover-add").response(ui_lang.cal_added,!0),$("p.event-info").remove(),add_event(a.id,b,e,d),$("div#event-conteiner > div").tsort("span.time"),$(".close-popover").trigger("click")):$(".popover-add").response(a.result,!1)},fail:function(){$(".popover-add").response(ui_lang.server_side_error,!1)}}):$(".popover-add").response(ui_lang.cal_no_values,!1)});$("button.show-desc").live("click",function(){$(this).parent(".description").toggleClass("closed");
$(this).children("i").toggleClass("icon-chevron-down");$(this).children("i").toggleClass("icon-chevron-up")});$(window).resize(a);$(document).ajaxComplete(function(){a()});$("button.toggle-cal").live("click",function(){$("tbody#cal-body").toggle();$(this).children("i").toggleClass("icon-chevron-up");$(this).children("i").toggleClass("icon-chevron-down");hide_cal_body("tbody#cal-body")});$("button.edit-event").live("click",function(){$(this).removeClass("edit-event btn-primary");$(this).addClass("btn-success save-event");
$(this).html(ui_lang.save);var a=$(this).parents(":eq(2)");a.find("span.time").attr("contentEditable","true").forcetime();a.find("h3.event-name").attr("contentEditable","true");var b=a.find("div.desc-field");0<b.length?(a.find("div.description").removeClass("closed"),b.attr("contentEditable","true"),0==$("div.wysiwyg").length&&(a=new Wysiwyg,b.before(a.el))):(a.append('<div class="description"><div class="desc-field" contentEditable="true"></div></div>'),0==$("div.wysiwyg").length&&(a=new Wysiwyg,
$("div.desc-field").before(a.el)))});$("a.delete-event").live("click",function(){var a=$(this).parents(":eq(4)"),b=a.find("button.edit-event").attr("id");void 0!=b?$.ajax({type:"POST",url:config.remove,data:{id:b},success:function(b){"deleted"==b?(a.parent().response(ui_lang.cal_evt_deleted,!0),change_count("-"),a.remove()):a.response(ui_lang.cal_error_del,!1)},fail:function(){alert(ui_lang.fail)}}):alert(ui_lang.finish_editing)});$("a.done-event").live("click",function(){var a=$(this).parents(":eq(4)"),
b=a.find("button.edit-event").attr("id");void 0!=b?$.ajax({type:"POST",url:config.done,data:{id:b},success:function(b){"done"==b?(a.find("h3.event-name").addClass("event-done"),a.find("a.done-event").addClass("hide"),a.find("a.not-done-event").removeClass("hide")):a.response(b,!1)},fail:function(){alert(ui_lang.fail)}}):alert(ui_lang.finish_editing)});$("a.not-done-event").live("click",function(){var a=$(this).parents(":eq(4)"),b=a.find("button.edit-event").attr("id");void 0!=b?$.ajax({type:"POST",
url:config.not_done,data:{id:b},success:function(b){"done"==b?(a.find("h3.event-name").removeClass("event-done"),a.find("a.done-event").removeClass("hide"),a.find("a.not-done-event").addClass("hide")):a.response(b,!1)},fail:function(){alert(ui_lang.fail)}}):alert(ui_lang.finish_editing)});$("button.save-event").live("click",function(){var a=$(this).parents(":eq(2)");time_el=a.find("span.time");event_el=a.find("h3.event-name");desc_el=a.find("div.desc-field");var b=$(this).attr("id"),e=$("h2#active-date").html().slice(0,
-1),d=time_el.html(),f=event_el.html(),g=desc_el.html(),h=$(this);""!=e&""!=f?$.ajax({type:"POST",url:config.edit,data:{id:b,day:e,time:d,data:f,description:g},success:function(b){switch(b){case "error":a.response(ui_lang.cal_couldnt_save,!1);time_el.attr("contentEditable","false");event_el.attr("contentEditable","false");desc_el.attr("contentEditable","false");h.removeClass("save-event btn-success");h.addClass("btn-primary edit-event");h.html(ui_lang.edit);break;case "reserved":a.response(ui_lang.cal_time_reserved);
break;default:time_el.attr("contentEditable","false"),event_el.attr("contentEditable","false"),desc_el.attr("contentEditable","false"),$("div.wysiwyg").remove(),h.removeClass("save-event btn-success"),h.addClass("btn-primary edit-event"),h.html(ui_lang.edit),$("div#event-container > div").tsort("span.time")}},fail:function(){a.response(ui_lang.fail,!1);time_el.attr("contentEditable","false");event_el.attr("contentEditable","false");desc_el.attr("contentEditable","false")}}):alert(ui_lang.no_values);
desc_button()});$(document).on("hover",".change-event",function(){$(this).datepicker("show");$(document).on("hover",".delete-event",function(){$(".change-event").datepicker("hide")});$(document).on("hover",".done-event",function(){$(".change-event").datepicker("hide")});$(this).datepicker().on("changeDate",function(a){var b=$(this).parents(":eq(4)"),e=b.find("button.edit-event").attr("id"),d=getFormatedDate(a.date);if(void 0!=e){if(a.date.getTime()==getSelDate().getTime())return!1;$.ajax({type:"POST",
url:config.changedate,data:{id:e,newdate:d},success:function(e){"changed"==e?(b.parent().response(ui_lang.cal_date_changed+d,!0),change_count("-"),a.date.getMonth()==getSelDate().getMonth()&&find_increment(a.date.getDate()),b.remove()):b.response(ui_lang.cal_error_change,!1)},fail:function(){alert(ui_lang.fail)}})}else alert(ui_lang.finish_editing);$(this).datepicker("hide");a.stopPropogation()})});$("#show-add").live("click",function(){$("#event-container").hide();$(".calendar .cal-cell").popover("hide");
$("#add-section").fadeIn("fast");if(0==$("div.wysiwyg").length){var a=new Wysiwyg;$(".area").before(a.el)}$(this).hide();ready_time($("input#time"))});$("#hide-add").live("click",function(a){a.preventDefault();$("div.wysiwyg").remove();$("#add-section").hide();$("#show-add").fadeIn("fast");$("#event-container").fadeIn("fast")});$("#main-add").live("click",function(a){a.preventDefault();a=$("h2#active-date").html().slice(0,-1);var b=$("#time").val(),e=$("#event").val(),d=$("div.area")[0].innerHTML;
""!=a&""!=e?$.ajax({type:"POST",url:config.add_event,dataType:"json",data:{day:a,time:b,event:e,description:d},success:function(a){"Added"==a.result?(change_count("+"),add_event(a.id,b,e,d),$("p.event-info").remove(),$("div#event-container > div").tsort("span.time"),$("#hide-add").trigger("click"),$("div#event-container").response(ui_lang.cal_added,!0)):$(".popover-add").response(a.result,!1)},fail:function(){$(".popover-add").response(ui_lang.server_side_error,!1)}}):$(".popover-add").response(ui_lang.no_values,
!1)});$("form :input").change(function(){$(this).closest("form").data("changed",!0)});$("ul.nav-tabs li a").click(function(){$.totalStorage("opened_tab",$(this).attr("href"))});$("#userSettings").click(function(a){a.preventDefault();a=$("#user_settings");if($(this).closest("form").data("changed")){var b=!1;$.each(a.find("input"),function(){if(""==this.value||void 0==this.value)b=!0});b?$("#user_settings").response(ui_lang.no_values,!1):(a=$("#user_settings"),a.attr("action",config.home+"settings/process_user"),
a.submit())}else $("#user_settings").response(ui_lang.no_change,!1)});$("a.bt_hide").live("click",function(a){a.preventDefault();a=$(this).attr("href");$(a).toggle();$(a).next().toggle();$(this).children("i").toggleClass("icon-chevron-up");$(this).children("i").toggleClass("icon-chevron-down");set_hidden(a)});$("#delete_acc_button").click(function(){if(confirm(ui_lang.delete_acc))window.location="http://ddiary.loc/logout/app/delete";else return!1});$("#access_log").click(function(){$.get(config.access,
function(a){a=eval(a);a[0].message||(2>$("#accessTable tr").length&&a.forEach(function(a){$("#accessTable").append("<tr><td>"+a.ip+"</td><td>"+a.time+"</td><td>"+a.client+"</td></tr>")}),$("#accessModal").modal("show"))})})});jQuery.fn.forcetime=function(){return this.each(function(){$(this).focusout(function(){""==this.innerHTML&&(this.innerHTML="0:00")});$(this).keydown(function(a){a=a.charCode||a.keyCode||0;return 8==a||9==a||46==a||186==a||37<=a&&40>=a||48<=a&&57>=a||96<=a&&105>=a})})};
function hide_hidden(){var a=$.totalStorage("hidden_sections");if($.isArray(a))for(var c in a)$(a[c]).hide(),$(a[c]).next().hide(),$("a[href$="+a[c]+"]").children("i").attr("class","icon-chevron-down")}function set_hidden(a){var c=[],c=$.totalStorage("hidden_sections");$.isArray(c)?-1==$.inArray(a,c)?c.push(a):(a=c.indexOf(a),c.splice(a,1)):(c=[],c.push(a));$.totalStorage("hidden_sections",c)}
function change_count(a,c){var b=$(".cal-active").find("span.events");if(0<b.length){var e=b.text(),e=parseInt(e);"-"==a?e--:e++;0<e?b.text(e):($(".cal-active").find("span.events").remove(),c=$(".cal-active").find("div.day"),c.hasClass("bold")||c.addClass("no-events"))}else $(".cal-active").find("div.day").removeClass("no-events"),$(".cal-active").append('<span class="events">1</span>')}
jQuery.fn.response=function(a,c){var b="alert-error";!0==c&&(b="alert-success");this.prepend('<div class="alert '+b+'">'+a+'<a class="close" data-dismiss="alert" href="#">&times;</a></div>');setTimeout("$('.alert').alert('close');",5E3)};
function load_events(a,c){null==c&&(c=$("div.cal-active").find("div.day").html());$("#day-events").html('<div class="progress progress-striped active"><div class="bar"></div></div>');""!=c?$.ajax({type:"POST",url:config.events,data:{day:c},success:function(b){a.html(b);desc_button();$("#day-events").trigger("data_fetch")},fail:function(){a.html("<p>"+ui_lang.server_side_error+"</p>")}}):alert(ui_lang.no_values)}
function desc_button(){$("div.desc-field").each(function(){60<$(this).height()?0==$(this).parent().find("button.show-desc").length&&$(this).before('<button class="btn show-desc" title="details.."><i class="icon-chevron-down"></i></button>'):$(this).parent().find("button.show-desc").remove();""==$(this).text()&&($(this).parent().remove(),$(this).remove())})}
function add_event(a,c,b,e){""==c&&(c="0:00");var d=getFormatedDate(getSelDate());a='<div class="event-item"><div class="controlls"><div class="btn-group"><button class="btn btn-primary edit-event" id="'+a+'">'+ui_lang.edit+'</button><button class="btn dropdown-toggle btn-primary" data-toggle="dropdown"><span class="caret"></span></button><ul class="dropdown-menu"><li><a href="#" class="done-event">'+ui_lang.done+'</a></li><li><a href="#" class="change-event" data-date-format="yyyy-mm-dd" data-date="'+
d+'">'+ui_lang.change_date+'</a></li><li class="divider"></li><li><a href="#" class="delete-event">'+ui_lang["delete"]+"</a></li></ul></div></div>";a+='<span class="time">'+c+'</span><h3 class="event-name">&nbsp;'+b+"</h3>";""!=e&&(a+='<div class="description closed"><div class="desc-field">'+e+"</div></div>");a+="</div>";$("div#event-container").append(a)}
function ready_time(a){a.focus().typeahead({source:"00:00 1:00 2:00 3:00 4:00 5:00 6:00 7:00 8:00 9:00 10:00 11:00 12:00 13:00 14:00 15:00 16:00 17:00 18:00 19:00 20:00 21:00 22:00 23:00 1:10 1:20 1:30 1:40 1:50 2:10 2:20 2:30 2:40 2:50 3:10 3:20 3:30 3:40 3:50 4:10 4:20 4:30 4:40 4:50 5:10 5:20 5:30 5:40 5:50 6:10 6:20 6:30 6:40 6:50 7:10 7:20 7:30 7:40 7:50 8:10 8:20 8:30 8:40 8:50 9:10 9:20 9:30 9:40 9:50 10:10 10:20 10:30 10:40 10:50 11:10 11:20 11:30 11:40 11:50 12:10 12:20 12:30 12:40 12:50 13:10 13:20 13:30 13:40 13:50 14:10 14:20 14:30 14:40 14:50 15:10 15:20 15:30 15:40 15:50 16:10 16:20 16:30 16:40 16:50 17:10 17:20 17:30 17:40 17:50 18:10 18:20 18:30 18:40 18:50 19:10 19:20 19:30 19:40 19:50 20:10 20:20 20:30 20:40 20:50 21:10 21:20 21:30 21:40 21:50 22:10 22:20 22:30 22:40 22:50 23:10 23:20 23:30 23:40 23:50".split(" "),items:"6"});
a.forcetime()}function getSelDate(){var a=$(".cal-active").find("div.day").html(),c=$("table.calendar").attr("id"),b=c.match(/[0-9]{4}/),c=c.match(/[0-9]{2}$/);return null!=a?new Date(b,c-1,a):new Date}function getFormatedDate(a){var c=a.getDate(),b=a.getMonth()+1;return a.getFullYear()+"-"+b+"-"+c}function hasScrollBar(){return $("body").outerHeight()>$(window).height()}
function find_increment(a){a=$("#cal-body").find("div.day:textEquals('"+a+"')");a.removeClass("no-events");events=a.parent().find("span.events");0<events.length?(a=events.text(),a=parseInt(a),a++,events.text(a)):a.parent().append('<span class="events">1</span>')}function show_active_tab(){var a=$.totalStorage("opened_tab");void 0!=a?$('.nav-tabs a[href="'+a+'"]').tab("show"):$(".nav-tabs a:first").tab("show")}$.expr[":"].textEquals=function(a,c,b){return(a=$(a).text().match("^"+b[3]+"$"))&&0<a.length};
